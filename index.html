`<script>
    // Define the constraints
    const horizontalConstraints = [
        [null, '=', null, 'X'],  // First row
        ['X', null, '=', null],  // Second row
        [null, '=', null, 'X'],  // Third row
        ['X', null, '=', null]   // Fourth row
    ];

    const verticalConstraints = [
        [null, '=', 'X', null],  // First column
        ['X', null, '=', null],  // Second column
        [null, '=', null, 'X'],  // Third column
        ['X', null, '=', null]   // Fourth column
    ];

    function initializeGrid() {
        const puzzleGrid = document.getElementById('puzzleGrid');
        puzzleGrid.innerHTML = '';
        
        for (let i = 0; i < 4; i++) {
            for (let j = 0; j < 4; j++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.row = i;
                cell.dataset.col = j;
                cell.addEventListener('click', () => cycleCell(cell));
                
                // Add horizontal constraints
                if (j < 3 && horizontalConstraints[i][j]) {
                    const hConstraint = document.createElement('div');
                    hConstraint.className = 'constraint horizontal';
                    hConstraint.style.color = horizontalConstraints[i][j] === '=' ? '#22c55e' : '#3b82f6';
                    hConstraint.textContent = horizontalConstraints[i][j];
                    cell.appendChild(hConstraint);
                }
                
                // Add vertical constraints
                if (i < 3 && verticalConstraints[i][j]) {
                    const vConstraint = document.createElement('div');
                    vConstraint.className = 'constraint vertical';
                    vConstraint.style.color = verticalConstraints[i][j] === '=' ? '#22c55e' : '#3b82f6';
                    vConstraint.textContent = verticalConstraints[i][j];
                    cell.appendChild(vConstraint);
                }
                
                puzzleGrid.appendChild(cell);
            }
        }
    }

    function cycleCell(cell) {
        const symbols = ['', 'ðŸª‘', 'ðŸŒ¿'];
        let current = symbols.indexOf(cell.textContent);
        cell.textContent = symbols[(current + 1) % symbols.length];
        
        // Re-add constraints if they were overwritten
        const row = parseInt(cell.dataset.row);
        const col = parseInt(cell.dataset.col);
        
        if (col < 3 && horizontalConstraints[row][col]) {
            const hConstraint = document.createElement('div');
            hConstraint.className = 'constraint horizontal';
            hConstraint.style.color = horizontalConstraints[row][col] === '=' ? '#22c55e' : '#3b82f6';
            hConstraint.textContent = horizontalConstraints[row][col];
            cell.appendChild(hConstraint);
        }
        
        if (row < 3 && verticalConstraints[row][col]) {
            const vConstraint = document.createElement('div');
            vConstraint.className = 'constraint vertical';
            vConstraint.style.color = verticalConstraints[row][col] === '=' ? '#22c55e' : '#3b82f6';
            vConstraint.textContent = verticalConstraints[row][col];
            cell.appendChild(vConstraint);
        }
    }

    // Add these style updates to your existing styles
    const additionalStyles = `
        .constraint {
            position: absolute;
            font-size: 1.2rem;
            font-weight: bold;
            pointer-events: none;
            z-index: 10;
        }
        .horizontal {
            right: -12px;
            top: 50%;
            transform: translateY(-50%);
        }
        .vertical {
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
        }
    `;

    // Add styles to document
    const styleSheet = document.createElement("style");
    styleSheet.innerText = additionalStyles;
    document.head.appendChild(styleSheet);

    document.getElementById('resetBtn').addEventListener('click', initializeGrid);
    document.addEventListener('DOMContentLoaded', initializeGrid);
</script>`
